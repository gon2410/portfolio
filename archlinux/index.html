<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" sizes="32x32" href="../image.png">
    <title>Gonzalo Olivera | ArchLinux</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body>
    <header>
        <nav class="relative">
            <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
                <div class="relative flex h-16 items-center justify-between">
                    <a href="../index.html" class="text-2xl text-cyan-700 font-semibold">&lt;Gonzalo Olivera /&gt;</a>
                    <div>
                        
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="mx-auto max-w-[50rem] mt-5 grid gap-[5rem]">
        <div>
            <p class="text-xl">Conectando a internet</p>
            <hr>
            <br>
            <p>
                Primero, es necesario tener conexión a internet. Lo ideal seria conectar un cable de ethernet. Si no tenés,
                podés hacerlo con tu teléfono conectandolo a la computadora con un cable USB. Ahora, para verificar podes
                hacerlo con:
            </p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ ping www.google.com</code></pre>
            </div>
            
            <p>En el caso que solo puedas conectarte inalámbricamente, podes hacerlo con el comando:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ wifi-menu</code></pre>
            </div>
        </div>

        <div>
            <p class="text-xl">Setear hora</p>
            <hr>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ timedatectl set-ntp true</code></pre>
            </div>
        </div>

        <div>
            <p class="text-xl">Particionar el disco</p>
            <hr>
            <br>
            <p>
                Primero hay que encontrar el nombre del disco donde se va a instalar Arch. El comando de abajo va a listar
                todos los discos disponibles. Por ejemplo, en mi caso se llama <b>sda</b> y es el que usaremos de ahora en más.
            </p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ lsblk</code></pre>
            </div>

            <p>
                Una vez que sepas el nombre de tu disco, ejecutá el siguiente comando para abrir <b>cfdisk</b>, el
                cual es un programa que nos ayuda a particionar discos.
            </p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ cfdisk /dev/sda</code></pre>
            </div>

            <p>
                El disco se va a particionar en cuatro divisiones y el tamaño para cada partición va a depender del tamaño de tu disco. El mio es de 1TB. Pero es posible
                tener una idea o noción con este listado:
            </p>
            <br>
            <table class="w-full border">
                <thead>
                    <tr>
                        <th>Partición</th>
                        <th>Tamaño</th>
                    </tr>
                </thead>
                <tbody class="text-center">
                    <tr class="border">
                        <td>BOOT (dev/sda1)</td>
                        <td>512MB o más (1GB seria ideal)</td>
                    </tr>
                    <tr class="border">
                        <td>SWAP(dev/sda2)</td>
                        <td>la_capacidad_de_ram * 2 (8GB * 2 = 16GB)</td>
                    </tr>
                    <tr>
                        <td>ROOT(dev/sda3)</td>
                        <td>200GB</td>
                    </tr>
                    <tr class="border">
                        <td>HOME (dev/sda4)</td>
                        <td>lo restante</td>
                    </tr>
                </tbody>
            </table>
            <br>
            <p>Guardar los cambios y salír.</p>
        </div>

        <div>
            <p class="text-xl">Formateando particiones</h6>
            <hr>
            <br>
            <p>La partición <b>BOOT</b> debe ser de formato <b>FAT32</b> ya que el sistema es <b>UEFI</b>:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mkfs.fat -F32 /dev/sda1</code></pre>
            </div>

            <p>La partición <b>ROOT</b> debe ser de formato <b>ext4</b>:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mkfs.ext4 /dev/sda3</code></pre>
            </div>

            <p>La partición <b>HOME</b> también debe ser de formato <b>ext4</b>:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mkfs.ext4 /dev/sda4</code></pre>
            </div>
            
            <p>Crear partición <b>SWAP</b>:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mkswap /dev/sda2</code></pre>
            </div>

            <p class="arch_p">Montar partición <b>SWAP</b>:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ swapon /dev/sda2</code></pre>
            </div>
        </div>

        <div>
            <p class="text-xl">Montando particiones</h6>
            <hr>
            <br>
            <p>Montar partición <b>ROOT</b>:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mount /dev/sda3 /mnt</code></pre>
            </div>

            <p class="arch_p">Crear directorio <b>HOME</b>:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mkdir /mnt/home</code></pre>
            </div>

            <p class="arch_p">Montar partición <b>HOME</b> en el directorio <b>HOME</b>:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mount /dev/sda4 /mnt/home</code></pre>
            </div>
        </div>

        <div>
            <p class="text-xl">Instalando el sistema base</p>
            <hr>
            <br>
            <p>
                Necesitamos instalar el sistema base, un editor de texto (en este caso, <b>Nano</b>) y el kernel de Linux.
                Puedo tomarse un tiempo dependiendo de la velocidad de tu conexión de internet.
            </p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ pacstrap /mnt base base-devel nano linux</code></pre>
            </div>
        </div>

        <div>
            <p class="text-xl">Generando fstab</p>
            <hr>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ genfstab -U -p /mnt >> /mnt/etc/fstab</code></pre>
            </div>
        </div>

        <div class="mt-5">
            <p class="text-xl">Nuevo sistema instalado</p>
            <hr>
            <br>
            <p>Ingresar en el nuevo sistema instalado con el siguiente comando:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ arch-chroot /mnt</code></pre>
            </div>

            <p>
                Elegir el lenguaje del sistema. Recomiendo usar Inglés, English. Abrir <b>locale.gen</b> con el editor
                de text previamente instalado y descomenta la linea <b>#en.US.UTF-8</b>.
            </p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ nano /etc/locale.gen</code></pre>
            </div>

            <p>Luego, lo generamos:</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ locale-gen</code></pre>
            </div>

            <p>Linkear la zona horario con tu horario local. En mi caso, <b>America, Buenos Aires</b></p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ ln -sf /usr/share/zone/America/Buenos\ Aires /etc/localtime</code></pre>
            </div>

            <p>Sincronizar el reloj del sistema con el reloj del hardware.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ hwclock --systohc --utc</code></pre>
            </div>

            <p>Setear nombre de host (hostname). Puede ser el nombre que quieras.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ echo arch > /etc/hostname</code></pre>
            </div>

            <p>Instalar network manager. Esto es muy importante para tener acceso a internet luego del primer reinicio
                en tu nuevo sistema operativo.
            </p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ pacman -S networkmanager</code></pre>
            </div>

            <p>Y no te olvides de habilitarlo.</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ systemctl enable NetworkManager</code></pre>
            </div>

            <p>Setear contraseña root.</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ passwd</code></pre>
            </div>
        </div>

        <div>
            <p class="text-xl">GRUB</p>
            <hr>
            <br>
            <p>Instalar GRUB</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ pacman -S grub efibootmgr</code></pre>
            </div>

            <p>Crear directorio <b>/boot/efi</b></p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mkdir /boot/efi</code></pre>
            </div>

            <p>Montar partición <b>BOOT</b> en el directorio creado arriba (<b>/boot/efi</b>).</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mount /dev/sda1 /boot/efi</code></pre>
            </div>

            <p>Instalar el bootloeadr de GRUB en el directorio <b>/boot/efi</b>.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ grub-install --target=x86_64-efi --bootloader-id=GRUB --efi-directory=/boot/efi</code></pre>
            </div>

            <p>Generar el archivo de configuración de GRUB.</p>
                        
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ grub-mkconfig -o /boot/grub/grub.cfg</code></pre>
            </div>

            <p>
                Esta parte la obtuve de un canál de YouTube llamado <a href="https://www.youtube.com/@AverageLinuxUser">Average Linux User</a>,
                y su función es asegurar que el sistema operativo arranque sin importar que suceda.
                Crear otro directorio llamado <b>EFI/BOOT</b> dentro de <b>/boot/efi</b>.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ mkdir /boot/efi/EFI/BOOT</code></pre>
            </div>    

            <p>Copiar el mismo archivo de GRUB recientemente creado en el directorio <b>EFI/BOOT</b>.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ cp /boot/efi/EFI/GRUB/grubx64.efi /boot/efi/EFI/BOOT/BOOTX64.EFI</code></pre>
            </div>

            <p>Crear un archivo de arranque con el editor <b>NANO</b>.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ nano /boot/efi/startup.nsh</code></pre>
            </div>

            <p>Escribe las siguientes dos lineas, y luego presione Ctrl+S para guardar y Ctrl+X para salir del editor.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded">
                    <code>
                        bcf boot add 1 fs0:/EFI/GRUB/grubx64.efi "My Grub Bootloader"
                        exit
                    </code>
                </pre>
            </div>

            <p class="arch_p">Salir del sistema instalado</p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ exit</code></pre>
            </div>

            <p>Desmontar el directorio <b>/mnt</b>.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ umount -R /mnt</code></pre>
            </div>

            <p>Reiniciar la máquina.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ systemctl reboot</code></pre>
            </div>
        </div>

        <div>
            <p class="text-xl">Crea tu usuario</h6>
            <hr>
            <br>
            <p>
                Despues de reiniciar tenes que loguearte como usuario root. Esto significa usar la contraseña que seteaste mas
                arriba. Luego de hacer esto, podes crear tu usuario y agregar a dos grupos: wheel y video.
            </p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ useradd -m -G wheel,video username</code></pre>
            </div>

            <p>Dale a tu usuario una contraseña.</p>
            
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ passwd username</code></pre>
            </div>

            <p>
                Edita el archivo <b>sudoers</b> para darle a los usuario en el grupo wheel privilegios de superusuario.
                Busca el grupo wheel en el archivo y descomenta la linea. Es algo asi: <b>%WHEEL ALL=(ALL:ALL) ALL</b>.
                Luego Ctrl+S para guardar y Ctrl+X para salir.
            </p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ nano /etc/sudoers</code></pre>
            </div>
        </div>

        <div>
            <p>Eso es todo.</p>
        </div>
</body>
</html>

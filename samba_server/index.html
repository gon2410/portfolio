<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Samba server</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body>
    <header>
        <nav class="relative">
            <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
                <div class="relative flex h-16 items-center justify-between">
                    <div>
                        <a href="/index.html" class="text-2xl text-gray-600 font-semibold">Gonzalo Olivera</a>
                        <p class="font-semibold inline">/ Helpdesk - SysAdmin Junior</p>
                    </div>
                    <div>
                        <a href="https://www.linkedin.com/in/gonzalo-olivera-124b091b4/" class="text-gray-600 font-semibold">linkedIn</a>
                        <a href="https://github.com/gon2410" class="text-gray-600 font-semibold">github</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="mx-auto max-w-[75rem] mt-5 grid gap-[5rem]">
        <div>
            <p class="text-2xl text-center font-semibold">Servidor Samba con Ubuntu Server corriendo en VMware</p>
        </div>

        <div>
            <p>
                El objetivo de este artículo es que me sirva a mi para aprender y fijar conocimientos pero tambien
                puede servir de tutorial. Es una lista paso a paso de como construir un servidor de archivos básico
                con <b>Samba</b>, <b>Ubuntu Server</b> corriendo en una máquina virtual<b>VMware</b>.
                Antes de comenzar es necesario ya tener un servidor de Ubuntu instalado, corriendo en VMware.
            </p>
            <br>
            <p>Cosas para tener en cuenta:
                <ul>
                    <li>
                        -- La máquina host es la computadora real <b>fisica</b> donde esta instalado VMware.
                        En este caso esta corriendo Ubuntu 24.04.
                    </li>
                    <li>-- La máquina virtual es la computadora que corre dentro de VMware. En este caso
                        es un servidor de Ubuntu (Ubuntu Server).
                    </li>
                    <li>-- El hostname es el nombre de tu computadora. Se averigua ejecutando el comando <code>$ hostname</code></li>
                </ul>
            </p>
        </div>

        <div>
            <p class="text-xl">Abrir VMware</p>
            <hr>
            <br>
            <p>
                Primero tenemos que arrancar la maquina virtual, por lo tanto, desde la terminal, ejecutamos
                el siguiente comando para iniciar VMware:
            </p>

            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo vmware</code></pre>
            </div>
            <div class="my-3">
                <img src="images/sudo_vmware.png" alt="sudo_vmware">
            </div>
            <p>
                Como estas ejecutando un comando con privilegios de superusuario ("sudo"), cuando aprietes
                <b>Enter</b> te va a pedir que ingreses tu contraseña de administrador:
            </p>
            <div class="my-3">
                <img src="/samba_server/images/sudo_vmware_2.png" alt="">
            </div>
            <p>
                Luego de que ingreses tu contraseña, se abrira VMware:
            </p>
            <div class="my-3">
                <img src="/samba_server/images/wmare.png" alt="">
            </div>
        </div>
        <div>
            <p class="text-xl">Configurar e iniciar Ubuntu Server</p>
            <hr>
            <br>
            <p>Una vez iniciado VMware, toca arrancar Ubuntu Server pero primero es necesario asegurarnos
                de que la conexión de la maquina virtual esté en modo <b>bridge</b>. Esta opcion hace posible
                que cualquier dispositivo <b>que esté conectado a la misma red</b> pueda acceder al servidor de
                archivos, ya sean computadoras, smart phones o tablets. Sin esta opción, solamente la máquina host
                podria acceder.
            </p>
            <p>
                Para hacer esto, haces click derecho en la maquina virtual y seleccionas <b>Settings</b>.
            </p>
            <div class="my-3">
                <img src="/samba_server/images/vmware_2.png" alt="">
            </div>
            <p>
                Esto abre la ventana de configuraciónes:
            </p>
            <div class="my-3">
                <img src="/samba_server/images/vmware_3.png" alt="">
            </div>
            <p>
                Luego, seleccionas <b>Network Adapter</b> y elegís la opción <b>bridged.</b> Por último,
                apretas <b>Save</b> para guardar y se cierra.
            </p>
            <div class="my-3">
                <img src="/samba_server/images/vmware_4.png" alt="">
            </div>
            <p>Y ahora si, arrancas la máquina virtual:</p>
            <div class="my-3">
                <img src="/samba_server/images/vmware_5.png" alt="">
            </div>
        </div>

        <div>
            <p class="text-xl">Instalar y configurar Samba</p>
            <hr>
            <br>
            <p>
                Ahora que tenemos la máquina virtual, nos logueamos con nuestro usuario y contraseña:
            </p>
            <div class="my-3">
                <img src="/samba_server/images/server_1.png" alt="">
            </div>
            <p>
                Antes de instalar Samba (en realidad para instalar cualquier paquete), es buena práctica
                actualizar el repositorio. En Ubuntu Server se realiza ejecutando el comando:
            </p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo apt update</code></pre>
            </div>
            <p>
                Al ejecutar este comando, primero, como vimos antes, te pedirá la contraseña de administrador.
            </p>
            <div class="my-3">
                <img src="/samba_server/images/server_2.png" alt="">
            </div>
            <p>Bueno, ahora si instalamos Samba con el siguiente comando:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo apt install samba</code></pre>
            </div>
            <p>
                Te va a preguntar si estas seguro. Apretas la tecla <b>Y</b> para responder que si. En mi caso
                ya está instalado por lo tanto me avisa lo propio.
            </p>
            <div class="my-3">
                <img src="/samba_server/images/server_3.png" alt="">
            </div>
            <p>
                Una vez que Samba esta instalado, es hora de activar el servicio a traves de <b>systemd</b>, el sistema
                de inicio que utilizan todas las distribuciones basadas en Debian. Es un gestor de servicios de segundo
                plano (tambien llamados "deamon"). Para activar dicho servicio, primero lo habilitamos con este comando:
            </p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo systemctl enable smbd --now</code></pre>
            </div>
            <div class="my-3">
                <img src="/samba_server/images/server_4.png" alt="">
            </div>
            <p>Y luego, lo activamos:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo systemctl start smbd</code></pre>
            </div>
            <p><b>¿Como sabemos que realmente se está ejecutando?</b> Con este comando:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo systemctl status smbd</code></pre>
            </div>
            <div class="my-3">
                <img src="/samba_server/images/server_5.png" alt="">
            </div>
        </div>

        <div>
            <p class="text-xl">Archivos que se van a compartir y últimas configuraciones</p>
            <hr>
            <br>
            <p>
                Por último, tenemos que definir la carpeta de archivos que se van a compartir. Para crearla, ejecutamos
                el siguiente comando:
            </p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo mkdir -p /srv/archivos</code></pre>
            </div>
            <p>
                Perfecto. Ahora hacemos que el dueño de esa carpeta seas vos para poder crear y editar archivos.
                <b>Nota: </b>Mi nombre de usuario es <b>gon</b> y pertenece al grupo <b>gon</b>. 
            </p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo chown gon:gon /srv/archivos</code></pre>
            </div>
            <div class="my-3">
                <img src="/samba_server/images/server_6.png" alt="">
            </div>
            <p>Por último, abrimos el archivo de configuración de Samba:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded"><code>$ sudo nano /etc/samba/smb.conf</code></pre>
            </div>
            <p>Y al final agregamos las siguiente lineas:</p>
            <div>
                <pre class="my-3 p-2 bg-gray-300 rounded">
                    <code>
                        [archivos]
                            path = /srv/archivos
                            browseable = yes
                            read only = yes
                            guest ok = yes
                    </code>
                </pre>
            </div>
            <div class="my-3">
                <img src="/samba_server/images/server_7.png" alt="">
            </div>
        </div>
        <div>
            <p class="text-xl">Testeando</p>
            <hr>
            <br>
            <p>
                Ahora testeamos. Para eso, primero creo un pequeño archivo de texto a modo de ejemplo en el directorio de archivos
                creado recien. Para esto me posiciono dentro de la carpeta con el comando <b>cd</b> (<b>c</b>hange <b>d</b>irectory):
            </p>
            <div class="my-3">
                <img src="/samba_server/images/server_8.png" alt="">
            </div>
            <p>
                Y luego, ejecutamos varios comandos. Usamos <b>touch</b> para crear el archivo en el lugar. A continuación
                usamos <b>echo</b> para escribir una linea dentro del archivo. Luego verificamos el contenido con <b>cat</b>.
            </p>
            <div class="my-3">
                <img src="/samba_server/images/server_9.png" alt="">
            </div>
            <p>
                Bueno, ahora en la máquina host ejecuto <b>Nautilus</b> que es el explorador de archivos instalado y me dirijo a
                <b>+ Other Locations</b>
            </p>
            <div class="my-3">
                <img src="/samba_server/images/nautilus_1.png" alt="">
            </div>
            <p>Ahora, posicionado en esta area. Abajo del todo hay un campo para ingresar la direccion del servidor, la cual, en
                mi caso, es esta: <b>smb://gonzaloserver/</b>. "gonzaloserver" es el hostname. Mas arriba indiqué como averiguarlo.
            </p>
            <div class="my-3">
                <img src="/samba_server/images/nautilus_2.png" alt="">
            </div>
            <p>
                Presiono <b>connect</b> y se conectará el servidor. Como lo configuramos para que aceptara invitados
                <b>(guest ok = yes)</b>, no nos pide contraseña pero normalmente si lo haria. Nos aparecerá la carpeta
                <b>archivos:</b>
            </p>
            <div class="my-3">
                <img src="/samba_server/images/nautilus_3.png" alt="">
            </div>
            <p>Y dentro de <b>archivos</b> está el archivo de texto creado en el servidor! Lo abrimos</p>
            <div class="my-3">
                <img src="/samba_server/images/nautilus_4.png" alt="">
            </div>
            <div class="my-3">
                <img src="/samba_server/images/nautilus_5.png" alt="">
            </div>
            <p>Y esto es un servidor de archivos básico. Existen mas configuraciones para hacerlo mas seguro pero a partir de acá
                podés crear archivos, editarlos y acceder a ellos desde cualquier dispositivo que sea capaz de conectarse.
            </p>
            <p>Gracias por leer!</p>
        </div>
    </main>
</body>
</html>